[% pager = itr_thumbnail.pager %]
  <div>Say Cheese [% pager.total_entries %] Times!</div>
  <div class="pager">
    [% limit_page = 15 %]
    [% middle_page = (limit_page - 1) / 2 + 1 %]
    [% side_page = middle_page - 1 %]
    [% IF pager.current_page <= middle_page %]
      [% first_page = 1 %]
      [% IF pager.last_page <= limit_page %]
        [% last_page = pager.last_page %]
      [% ELSE %]
        [% last_page = limit_page %]
      [% END %]
    [% ELSIF pager.current_page + side_page <= pager.last_page %]
      [% first_page = pager.current_page - side_page %]
      [% last_page = pager.current_page + side_page %]
    [% ELSE %]
      [% IF pager.last_page > limit_page %]
        [% first_page = pager.last_page - (limit_page - 1) %]
      [% ELSE %]
        [% first_page = 1 %]
      [% END %]
      [% last_page = pager.last_page %]
    [% END %]
      [% FOREACH page = [first_page .. last_page] %]
        [% IF pager.current_page == page %]
          [% class = 'active-page-num' %]
          <span class="[% class %]">[% page %]</span>
        [% ELSE %]
          [% class = 'page-num' %]
          <a href="/?page=[% page %]&url=[% c.req.param('url') %]"><span class="[% class %]">[% page %]</span></a>
        [% END %]
      [% END %]
  </div>