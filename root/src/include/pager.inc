[% pager = iter_thumbnail.pager %]
<div>[% pager.total_entries %] thumbnails</div>
<div class="pager">
[% limit_page = 9 %]
[% middle_page = (limit_page - 1) / 2 + 1 %]
[% side_page = middle_page - 1 %]
[% IF pager.current_page <= middle_page %]
[% first_page = 1 %]
[% IF pager.last_page <= limit_page %]
[% last_page = pager.last_page %]
[% ELSE %]
[% last_page = limit_page %]
[% END %]
[% ELSIF pager.current_page + side_page <= pager.last_page %]
[% first_page = pager.current_page - side_page %]
[% last_page = pager.current_page + side_page %]
[% ELSE %]
[% IF pager.last_page > limit_page %]
[% first_page = pager.last_page - (limit_page - 1) %]
[% ELSE %]
[% first_page = 1 %]
[% END %]
[% last_page = pager.last_page %]
[% END %]
[% IF pager.previous_page %]<a href="/?page=[% pager.previous_page %]&url=[% c.req.param('url') %]"><span class="page-num">&lt;</span></a>[% END %]
[% FOREACH page = [first_page .. last_page] %]
[% IF pager.current_page == page %]
[% class = 'active-page-num' %]
<span class="[% class %]">[% page %]</span>
[% ELSE %]
[% class = 'page-num' %]
<a href="/?page=[% page %]&url=[% c.req.param('url') %]"><span class="[% class %]">[% page %]</span></a>
[% END %]
[% END %]
[% IF pager.next_page %]<a href="/?page=[% pager.next_page %]&url=[% c.req.param('url') %]"><span class="page-num">&gt;</span></a>[% END %]
</div>
